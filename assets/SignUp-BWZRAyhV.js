import{j as i,k as C,w as y,y as x,a as m,f as g,u as U,b as a,q as f,v,t as p,z as w,e as L,g as N,F as z,o as c,L as A,n as R,m as B}from"./index-D7V8y_gX.js";const E={id:"signUpPage",class:"bg-yellow"},I={class:"conatiner signUpPage vhContainer"},S=a("div",{class:"side"},[a("a",{href:"#"},[a("img",{class:"logoImg",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/logo.png",alt:""})]),a("img",{class:"d-m-n",src:"https://raw.githubusercontent.com/hexschool/2022-web-layout-training/main/todolist/img.png",alt:"workImg"})],-1),T={class:"formControls"},Z=a("h2",{class:"formControls_txt"},"註冊帳號",-1),D=a("label",{class:"formControls_label",for:"email"},"Email",-1),F={key:0},M=a("label",{class:"formControls_label",for:"name"},"您的暱稱",-1),$={key:1},j=a("label",{class:"formControls_label",for:"password"},"密碼",-1),q={key:2},G=a("label",{class:"formControls_label",for:"confirmPwd"},"再次輸入密碼",-1),H={key:3},O={__name:"SignUp",setup(J){const k="https://todolist-api.hexschool.io",s=i({email:"",password:"",confirmPwd:"",nickname:""}),P=C(),r=i(!1),d=i(!1),_=i(!1),u=i(!1),n=i(!1),e=i({email:"",password:"",nickname:"",confirmPwd:""}),b=async()=>{try{if(!s.value.email&&!s.value.password&&!s.value.nickname&&!s.value.confirmPwd){alert("請輸入註冊資料");return}if(!d.value||!_.value||!u.value||!n.value)return;r.value=!0,(await B.post(`${k}/users/sign_up`,{email:s.value.email,password:s.value.password,nickname:s.value.nickname})).status==201&&setTimeout(()=>{alert("註冊完成!"),P.push("/"),r.value=!1},2e3)}catch(l){const o=l.message.split(" ");o[o.length-1]==400?alert("用戶已存在"):alert("註冊失敗:"+l.message),r.value=!1}};return y(s,l=>{l.email.trim()==""?(e.value.email="此欄位不可留空",d.value=!1):l.email.match(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/)?(e.value.email="",d.value=!0):(e.value.email="信箱格式錯誤",d.value=!1),l.password.trim()==""?(e.value.password="此欄位不可留空",u.value=!1):l.password.trim().length<6?(e.value.password="密碼長度最少6碼",u.value=!1):l.password.trim().length>20?(e.value.password="密碼長度最長20碼",u.value=!1):(e.value.password="",u.value=!0),l.nickname.trim()==""?(e.value.nickname="此欄位不可留空",_.value=!1):(e.value.nickname="",_.value=!0),l.confirmPwd.trim()==""?(e.value.confirmPwd="此欄位不可留空",n.value=!1):l.confirmPwd.trim().length<6?(e.value.confirmPwd="密碼長度最少6碼",n.value=!1):l.confirmPwd.trim().length>20?(e.value.confirmPwd="密碼長度最長20碼",n.value=!1):l.confirmPwd.trim()!==l.password.trim()?(e.value.confirmPwd="密碼與再次輸入密碼不相同",n.value=!1):(e.value.confirmPwd="",n.value=!0)},{deep:!0}),(l,o)=>{const h=x("RouterLink");return c(),m(z,null,[g(U(A),{active:r.value,"onUpdate:active":o[0]||(o[0]=t=>r.value=t)},null,8,["active"]),a("div",E,[a("div",I,[S,a("div",null,[a("form",T,[Z,D,f(a("input",{class:"formControls_input",type:"email",id:"email",name:"email",placeholder:"請輸入 email","onUpdate:modelValue":o[1]||(o[1]=t=>s.value.email=t)},null,512),[[v,s.value.email]]),e.value.email?(c(),m("span",F,p(e.value.email),1)):w("",!0),M,f(a("input",{class:"formControls_input",type:"text",name:"name",id:"name",placeholder:"請輸入您的暱稱","onUpdate:modelValue":o[2]||(o[2]=t=>s.value.nickname=t)},null,512),[[v,s.value.nickname]]),e.value.nickname?(c(),m("span",$,p(e.value.nickname),1)):w("",!0),j,f(a("input",{class:"formControls_input",type:"password",id:"password",placeholder:"請輸入密碼","onUpdate:modelValue":o[3]||(o[3]=t=>s.value.password=t)},null,512),[[v,s.value.password]]),e.value.password?(c(),m("span",q,p(e.value.password),1)):w("",!0),G,f(a("input",{class:"formControls_input",type:"password",id:"confirmPwd",placeholder:"請再次輸入密碼","onUpdate:modelValue":o[4]||(o[4]=t=>s.value.confirmPwd=t)},null,512),[[v,s.value.confirmPwd]]),e.value.confirmPwd?(c(),m("span",H,p(e.value.confirmPwd),1)):w("",!0),a("button",{class:"formControls_btnSubmit",type:"submit",onClick:L(b,["prevent"])},"註冊帳號"),g(h,{to:"/",class:"formControls_btnLink"},{default:N(()=>[R("登入")]),_:1})])])])])],64)}}};export{O as default};
